Low power wide area network (LPWAN) technologies offer affordable wireless connectivity to massive number of low-power devices distributed over large geographical areas. Basically, LPWAN technologies waive data rate and latency to provide low power and long range communication. Recently, LPWAN technologies have become popular for Internet of Things (IoT) and smart city applications especially when low power consumption is critical.

Focus of this thesis is one of the most promising LPWAN technologies: LoRa. LoRa is a proprietary LPWAN technology developed by Semtech Corporation. A non-profit organization LoRa Alliance has developed an open standard medium access control (MAC) layer protocol called LoRaWAN to create large scale LoRa networks and interoperability between these networks. Low power device in a LoRaWAN network is called end node. The device connected to the power network that can receive from multiple channels at the same time is called the gateway. LoRaWAN end nodes can only communicate with gateways, end nodes cannot communicate with each other. Transmission from a single end node can be received by multiple gateways. To keep the power consumption low, LoRaWAN is based on pure ALOHA medium access control, which means that end nodes do not check whether the channel is available or not before transmission. During an end node is transmitting, another end node can initiate a transmission and a collision may occur.

LoRa uses a modulation technique trademarked as LoRaâ„¢ based on Chirp Spread Spectrum (CSS). CSS provides long range communication and resilience to interference. In LoRa modulation, the signal frequency scans the band from end to end within a particular channel. The direction of this scan determines the transmission symbol. The speed of the scan is called the spreading factor (SF). LoRa supports 6 different spreading factor options between 7 to 12. By changing the spreading factor of a LoRa transmission, it is possible to increase the communication range by scarifying the data rate. In short, as the spreading factor increases, the data rate decreases and the power consumption increases, however the communication range increases. In addition, transmissions with different LoRa spreading factors are orthogonal to each other. In other words, LoRa transmissions with different spreading factors within the same channel can communicate up to some extent without causing interference. Therefore, spreading factor selection of the end nodes significantly affects the number of collisions thus the network performance. It is difficult for end nodes to select the best spreading factor for them, since the end nodes are not aware of the transmissions around them. End nodes select the lowest spreading factor they can to communicate with the gateways to keep the power consumption low, to keep the communication duration short and reduce the likelihood of collisions. However, when other end nodes around them begin to transmit with the same spreading factor, the probability of collisions increases. Same spreading factor transmissions can significantly reduce network performance in densely deployed networks. In some cases, assignment of a higher spreading factor may increase the rate of successful packet delivery, even if the end nodes are close to the gateway. Other related academic studies on spread factor assignment for LoRaWANs are investigated and the current state of the art technologies are analyzed.

In this study, a discrete event simulation software is developed from scratch with Python programming language in order to study the effect of spreading factor assignment on LoRaWAN network performance. LoRaWAN networks with multiple gateways and multiple end nodes can be simulated with the developed simulation tool. The simulation tool can be fed with input parameters such as number of gateways, number of nodes, network radius, packet size, packet generation rate and with these inputs the tool produces simulation results such as total number of generated packets, number of successfully received packets, number of interfered packets, number of under sensitivity packets, network packet delivery ratio percentage, network throughput, total transmit energy consumption.

In the simulation tool, LoRa link quality model provided by Semtech Corporation is employed. Also, interference model described in previous academic studies is employed for the interference between same and different spreading factor LoRa transmissions. Transmission results (successful, collision or under sensitivity) are calculated using these two models. Other wireless communication technology interferences are ignored. Simulation results for various number of gateways, number of nodes, network topology radius, packet size inputs are presented. Then, correctness of the simulation tool outputs are examined.

In this study, the effect of spreading factor assignment on network performance is investigated in detail. The factors that increase the number of collisions are evaluated and measures that can be taken to reduce the number of collisions are described. Furthermore, a novel method which utilizes machine learning techniques is proposed to select the most efficient spreading factor. Support Vector Machine (SVM) and Decision Tree Classifier (DTC) machine learning methods are used for this new method called smart spreading factor assignment. In this method, gateways first monitor the location of each node, spreading factor of each transmission and result of each transmission. Then, gateways train a transmission prediction model with accumulated data by using SVM or DTC machine learning methods. With this model, the most efficient speeding factor is calculated for subsequent transmissions of the nodes. For each end node, transmission result prediction is calculated one by one from lowest speeding factor to highest spreading factor. The spreading factor of the first transmission projected as successful is selected for the end node. Gateways notify the new spreading factors to the end nodes. The end nodes will begin to use the new spreading factors for their subsequent transmissions.

The smart spreading factor assignment method is integrated into the developed simulation tool. First, the tool randomly assigns spreading factors to the end nodes and simulates the network. Then, the smart spreading factor assignment prediction model is generated using the accumulated transmission records and new spreading factors are calculated for each node. Finally, the tool simulates the same network again with the new spreading factors.

The simulation results show that the smart spreading factor assignment method yields better network packet delivery ratio and total transmission energy consumption than random spreading factor assignment method and lowest spreading factor assignment method. DTC machine learning method gives better packet delivery ratio results than SVM machine learning method. These two smart spreading factor assignment methods provide promising network performance improvements, especially for dense LoRaWAN networks.
